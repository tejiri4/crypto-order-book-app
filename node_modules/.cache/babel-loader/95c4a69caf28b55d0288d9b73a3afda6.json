{"ast":null,"code":"const webSocketSetup = async ({\n  text,\n  currencyPair,\n  callBack,\n  ws\n}) => {\n  if (text === 'subscribe') {\n    console.log('closed');\n\n    ws.onopen = () => {\n      //Subscribe to the channel\n      ws.send(JSON.stringify({\n        event: \"bts:\".concat(text),\n        data: {\n          channel: \"order_book_\".concat(currencyPair)\n        }\n      }));\n    };\n\n    ws.onmessage = msg => {\n      console.log(JSON.parse(msg.data), '=============>'); // callBack && callBack(JSON.parse(msg.data));\n    };\n  } else {\n    ws.close();\n  } // ws.onerror = error => {\n  //   console.log(`WebSocket error: ${error}`)\n  // }\n\n};\n\nexport const subscribe = ({\n  text,\n  currencyPair,\n  setWs,\n  getData\n}) => {\n  const ws = new WebSocket('wss://ws.bitstamp.net/');\n\n  ws.onopen = () => {\n    //Subscribe to the channel\n    ws.send(JSON.stringify({\n      event: \"bts:subscribe\",\n      data: {\n        channel: \"order_book_\".concat(currencyPair)\n      }\n    }));\n    setWs(ws);\n  };\n\n  ws.onmessage = msg => {\n    getData(JSON.parse(msg.data));\n  };\n};\nexport const unSubscribe = ({\n  ws,\n  currencyPair\n}) => {\n  ws.onopen = () => {\n    //ubscribe to the channel\n    ws.send(JSON.stringify({\n      event: \"bts:unsubscribe\",\n      data: {\n        channel: \"order_book_\".concat(currencyPair)\n      }\n    }));\n    ws.close();\n  };\n};","map":{"version":3,"sources":["/Users/tejirimatthew/crypto-order-book-app/src/utils/webSocketSetup.js"],"names":["webSocketSetup","text","currencyPair","callBack","ws","console","log","onopen","send","JSON","stringify","event","data","channel","onmessage","msg","parse","close","subscribe","setWs","getData","WebSocket","unSubscribe"],"mappings":"AAEA,MAAMA,cAAc,GAAG,OAAO;AAC5BC,EAAAA,IAD4B;AAE5BC,EAAAA,YAF4B;AAG5BC,EAAAA,QAH4B;AAI5BC,EAAAA;AAJ4B,CAAP,KAKjB;AAEJ,MAAIH,IAAI,KAAK,WAAb,EAA0B;AACxBI,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AAEAF,IAAAA,EAAE,CAACG,MAAH,GAAY,MAAM;AAChB;AACAH,MAAAA,EAAE,CAACI,IAAH,CAAQC,IAAI,CAACC,SAAL,CAAe;AAAEC,QAAAA,KAAK,gBAASV,IAAT,CAAP;AAAwBW,QAAAA,IAAI,EAAE;AAAEC,UAAAA,OAAO,uBAAgBX,YAAhB;AAAT;AAA9B,OAAf,CAAR;AAGD,KALD;;AAQAE,IAAAA,EAAE,CAACU,SAAH,GAAgBC,GAAD,IAAS;AACtBV,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAI,CAACO,KAAL,CAAWD,GAAG,CAACH,IAAf,CAAZ,EAAkC,gBAAlC,EADsB,CAGtB;AACD,KAJD;AAKD,GAhBD,MAgBO;AACLR,IAAAA,EAAE,CAACa,KAAH;AACD,GApBG,CA2BJ;AACA;AACA;;AAED,CApCD;;AAuCA,OAAO,MAAMC,SAAS,GAAG,CAAC;AACxBjB,EAAAA,IADwB;AAExBC,EAAAA,YAFwB;AAGxBiB,EAAAA,KAHwB;AAIxBC,EAAAA;AAJwB,CAAD,KAKnB;AACJ,QAAMhB,EAAE,GAAG,IAAIiB,SAAJ,CAAc,wBAAd,CAAX;;AACAjB,EAAAA,EAAE,CAACG,MAAH,GAAY,MAAM;AAChB;AACAH,IAAAA,EAAE,CAACI,IAAH,CAAQC,IAAI,CAACC,SAAL,CAAe;AAAEC,MAAAA,KAAK,iBAAP;AAA0BC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,OAAO,uBAAgBX,YAAhB;AAAT;AAAhC,KAAf,CAAR;AACAiB,IAAAA,KAAK,CAACf,EAAD,CAAL;AAED,GALD;;AAOAA,EAAAA,EAAE,CAACU,SAAH,GAAgBC,GAAD,IAAS;AACvBK,IAAAA,OAAO,CAACX,IAAI,CAACO,KAAL,CAAWD,GAAG,CAACH,IAAf,CAAD,CAAP;AACA,GAFD;AAGD,CAjBM;AAqBP,OAAO,MAAMU,WAAW,GAAG,CAAC;AAAClB,EAAAA,EAAD;AAAKF,EAAAA;AAAL,CAAD,KAAwB;AACjDE,EAAAA,EAAE,CAACG,MAAH,GAAY,MAAM;AAChB;AACAH,IAAAA,EAAE,CAACI,IAAH,CAAQC,IAAI,CAACC,SAAL,CAAe;AAAEC,MAAAA,KAAK,mBAAP;AAA4BC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,OAAO,uBAAgBX,YAAhB;AAAT;AAAlC,KAAf,CAAR;AACAE,IAAAA,EAAE,CAACa,KAAH;AACD,GAJD;AAKD,CANM","sourcesContent":["\n\nconst webSocketSetup = async ({\n  text,\n  currencyPair,\n  callBack,\n  ws\n}) => {\n\n  if (text === 'subscribe') {\n    console.log('closed');\n\n    ws.onopen = () => {\n      //Subscribe to the channel\n      ws.send(JSON.stringify({ event: `bts:${text}`, data: { channel: `order_book_${currencyPair}` } }))\n\n\n    }\n\n\n    ws.onmessage = (msg) => {\n      console.log(JSON.parse(msg.data), '=============>');\n\n      // callBack && callBack(JSON.parse(msg.data));\n    }\n  } else {\n    ws.close();\n  }\n\n\n\n\n\n\n  // ws.onerror = error => {\n  //   console.log(`WebSocket error: ${error}`)\n  // }\n\n}\n\n\nexport const subscribe = ({\n  text,\n  currencyPair,\n  setWs,\n  getData\n}) => {\n  const ws = new WebSocket('wss://ws.bitstamp.net/');\n  ws.onopen = () => {\n    //Subscribe to the channel\n    ws.send(JSON.stringify({ event: `bts:subscribe`, data: { channel: `order_book_${currencyPair}` } }))\n    setWs(ws)\n\n  }\n\n  ws.onmessage = (msg) => {\n   getData(JSON.parse(msg.data));\n  }\n}\n\n\n\nexport const unSubscribe = ({ws, currencyPair}) => {\n  ws.onopen = () => {\n    //ubscribe to the channel\n    ws.send(JSON.stringify({ event: `bts:unsubscribe`, data: { channel: `order_book_${currencyPair}` } }))\n    ws.close();\n  }\n}"]},"metadata":{},"sourceType":"module"}